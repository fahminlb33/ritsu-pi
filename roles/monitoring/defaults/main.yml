---
monitoring_state: present
monitoring_config_dir: "{{ config_root }}/monitoring"

monitoring_portainer:
  state: present
  image: portainer/portainer-ce:2.33.1
  port: 9000
  port_https: 9443

monitoring_grafana:
  state: present
  image: grafana/grafana:12.1.1-ubuntu
  port: 3000
  user:
    username: CHANGE-ME
    password: CHANGE-ME
    allow_signup: false

monitoring_prometheus:
  state: present
  image: prom/prometheus:v3.5.0
  port: 8005
  scrape_interval: 15s
  retention:
    time: 2y
    size: 100GB
  remote_write:
    enabled: true
    url: http://vector:9090
  extra_config: {}

monitoring_vector:
  state: present
  image: timberio/vector:0.49.0-debian
  port: 8686
  remote_write:
    port: 9090
    logs_path: /mnt/pool/prometheus-archive

monitoring_exporters:
  node:
    state: present
    image: prom/node-exporter:v1.9.1
    port: 8101

  cadvisor:
    state: present
    image: gcr.io/cadvisor/cadvisor:v0.53.0
    port: 8102

  blackbox:
    state: present
    image: prom/blackbox-exporter:v0.27.0
    port: 8103
    ping_hosts:
      - https://www.google.com
      - https://www.github.com

  speedtest:
    state: present
    image: fahminlb33/speedtest-exporter:1.0.1
    port: 8104
    # Configure the sample_interval to limit the number of checks interval because
    # the speed test will consume a considerable amount of bandwidth.
    scrape_interval: 1h

  mikrotik:
    state: present
    image: ghcr.io/akpw/mktxp:v1.2.12
    port: 8105
    # Mikrotik router host
    router:
      host: 10.20.20.1
      port: 8728
    # Mikrotik user with API access
    user:
      username: CHANGE-ME
      password: CHANGE-ME

  apcusbd:
    state: present
    image: iodeveloper/prom-apcupsd-exporter:1.0.1
    port: 8106
    # https://grafana.com/grafana/dashboards/19329-apc-ups/

  smartctl:
    state: present
    image: prometheuscommunity/smartctl-exporter:v0.014.0
    port: 8107
